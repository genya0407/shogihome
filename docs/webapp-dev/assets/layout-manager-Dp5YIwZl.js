var Q=Object.defineProperty;var Z=(y,v,m)=>v in y?Q(y,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):y[v]=m;var U=(y,v,m)=>Z(y,typeof v!="symbol"?v+"":v,m);import{cn as B,co as x,j as ee,Y as P,cp as te,cq as oe,cr as se,d as le,T as A,ac as ae,a1 as re,A as ue,k as ne,e as p,o as i,f as s,U as I,l as d,z as e,v as n,t as o,F as N,q as D,m as _,i as w,al as R,u as ie,cs as ce,ct as pe,cu as de,_ as he,av as S,by as _e,bz as ve}from"./confirm-vo48F4L8.js";import{E as fe,C as me}from"./ErrorMessage-CSFq_5cc.js";import{u as ye,a as O,T as f,b as L,H as G}from"./HorizontalSelector-giWvmtYc.js";import{I as Ce}from"./InfoMessage-D46F47n7.js";class Pe{constructor(){U(this,"_reactive");U(this,"_currentProfileURI",B);U(this,"_customProfileList",x());this._reactive=ee(this)}get reactive(){return this._reactive}get currentProfileURI(){return this._currentProfileURI}get customLayoutProfiles(){return this._customProfileList.profiles}selectProfile(v){this._currentProfileURI=v,P.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}addCustomProfile(v){const m=te(this._customProfileList,v);this._currentProfileURI=m,P.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}duplicateCustomProfile(v){const m=oe(this._customProfileList,v);m&&(this._currentProfileURI=m,P.updateLayoutProfileList(this._currentProfileURI,this._customProfileList))}removeCustomProfile(v){se(this._customProfileList,v),this._currentProfileURI=B,P.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}updateCustomProfile(v,m){for(let b=0;b<this._customProfileList.profiles.length;b++)if(this._customProfileList.profiles[b].uri===v){this._customProfileList.profiles[b]=m,this._currentProfileURI=v;break}P.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}async setup(){[this._currentProfileURI,this._customProfileList]=await P.loadLayoutProfileList()}}function be(){return new Pe().reactive}let T;function F(){return T||(T=be()),T}const ge={class:"main full column"},ke={class:"header column"},Ue=["value"],we=["value"],Le=["value"],Ie={class:"row wrap buttons"},Re={key:0,class:"custom-profile column grow scroll"},Te={class:"row"},Be=["value"],Se={class:"row"},Ae=["value"],Ee={class:"row"},Me={value:"Board"},Ne={value:"Record"},De={value:"Book"},Oe={value:"Chart"},Ge={value:"Analytics"},Fe={value:"Comment"},ze={value:"RecordInfo"},We={value:"ControlGroup1"},qe={value:"ControlGroup2"},He={class:"name"},Ye={key:0},Ve={key:1},je={key:2},Xe={key:3},$e={key:4},Je={key:5},Ke={key:6},Qe={key:7},Ze={key:8},xe={class:"property"},et={class:"key"},tt=["value","onInput"],ot={class:"property"},st={class:"key"},lt=["value","onInput"],at={class:"property"},rt={class:"key"},ut=["value","onInput"],nt={class:"property"},it={class:"key"},ct=["value","onInput"],pt={key:0},dt={class:"property"},ht={class:"property"},_t={key:1},vt={class:"property"},ft={class:"property"},mt={class:"property"},yt={class:"property"},Ct={key:2},Pt={class:"property"},bt={class:"property"},gt={key:3},kt={class:"property"},Ut={class:"property"},wt={class:"property"},Lt={class:"property"},It={class:"property"},Rt={class:"property"},Tt={class:"property"},Bt={class:"property"},St={class:"property"},At={key:4},Et={class:"property"},Mt=["onClick"],Nt=["onClick"],Dt=["onClick"],Ot=le({__name:"LayoutManager",setup(y){const v=A(),m=ye(),b=ae(),E=re(),c=F(),M=ue(),C=ne(()=>c.customLayoutProfiles.find(u=>u.uri===c.currentProfileURI)),z=u=>{const a=u.target;c.selectProfile(a.value)},W=()=>{c.addCustomProfile()},q=()=>{c.duplicateCustomProfile(c.currentProfileURI)},H=()=>{c.currentProfileURI.startsWith(ce)&&E.show({message:o.areYouSureWantToRemoveCurrentProfile,onOk:()=>{c.removeCustomProfile(c.currentProfileURI)}})},g=()=>c.customLayoutProfiles.find(u=>u.uri===c.currentProfileURI),Y=()=>{const u=g();if(u){const a=pe(u);navigator.clipboard.writeText(a),m.enqueue({text:o.profileExportedToClipboard})}},V=async()=>{try{const u=await navigator.clipboard.readText(),a=de(u);c.addCustomProfile(a),m.enqueue({text:o.profileImported})}catch{b.add(new Error(o.failedToImportProfile))}},k=(u,a)=>{const t=g();t&&c.updateCustomProfile(c.currentProfileURI,{...t,[u]:a})},h=(u,a,t)=>{const r=g();r&&c.updateCustomProfile(c.currentProfileURI,{...r,components:r.components.map((l,K)=>K!==u?l:{...l,[a]:t})})},j=u=>{const a=g();if(!a||u<=0)return;const t=[...a.components],r=t[u-1];t[u-1]=t[u],t[u]=r,c.updateCustomProfile(c.currentProfileURI,{...a,components:t})},X=u=>{const a=g();if(!a||u>=a.components.length-1)return;const t=[...a.components],r=t[u+1];t[u+1]=t[u],t[u]=r,c.updateCustomProfile(c.currentProfileURI,{...a,components:t})},$=u=>{const a=g();a&&c.updateCustomProfile(c.currentProfileURI,{...a,components:a.components.filter((t,r)=>r!==u)})},J=()=>{const u=g();if(!u)return;const a=[...u.components],t=M.value.value;switch(t){case"Board":a.unshift({type:t,left:0,top:0,width:800,height:600});break;case"Record":a.unshift({type:"Record",left:0,top:0,width:400,height:500});break;case"Book":a.unshift({type:"Book",left:0,top:0,width:500,height:250});break;case"Chart":a.unshift({type:"Chart",left:0,top:0,width:600,height:300,chartType:R.RAW});break;case"Analytics":a.unshift({type:"Analytics",left:0,top:0,width:600,height:300});break;case"Comment":a.unshift({type:t,left:0,top:0,width:250,height:250});break;case"RecordInfo":a.unshift({type:t,left:0,top:0,width:400,height:300});break;case"ControlGroup1":case"ControlGroup2":a.unshift({type:t,left:0,top:0,width:150,height:200});break}c.updateCustomProfile(c.currentProfileURI,{...u,components:a})};return(u,a)=>(i(),p("div",{class:ie(["root full",e(v).thema])},[s("div",ge,[s("div",ke,[s("select",{value:e(c).currentProfileURI,onChange:z},[s("option",{value:B},n(e(o).standard),9,we),(i(!0),p(N,null,D(e(c).customLayoutProfiles,(t,r)=>(i(),p("option",{key:r,value:t.uri},n(t.name),9,Le))),128))],40,Ue),s("div",Ie,[s("button",{class:"thin",onClick:W},n(e(o).addCustomLayoutProfile),1),C.value?(i(),p("button",{key:0,class:"thin",onClick:q},n(e(o).duplicateCurrentProfile),1)):d("",!0),C.value?(i(),p("button",{key:1,class:"thin",onClick:H},n(e(o).removeCurrentProfile),1)):d("",!0),C.value?(i(),p("button",{key:2,class:"thin",onClick:Y},n(e(o).exportProfileToClipboard),1)):d("",!0),s("button",{class:"thin",onClick:V},n(e(o).importProfileFromClipboard),1)])]),C.value?(i(),p("div",Re,[s("div",Te,[s("input",{class:"profile-name",value:C.value.name,onInput:a[0]||(a[0]=t=>k("name",e(O)(t)))},null,40,Be)]),s("div",Se,[_(f,{class:"color-toggle",value:!!C.value.backgroundColor,label:e(o).backgroundColor,"onUpdate:value":a[1]||(a[1]=t=>k("backgroundColor",t?"#000000":void 0))},null,8,["value","label"]),C.value.backgroundColor?(i(),p("input",{key:0,class:"color-selector",type:"color",value:C.value.backgroundColor,onInput:a[2]||(a[2]=t=>k("backgroundColor",e(O)(t)))},null,40,Ae)):d("",!0),_(f,{class:"backdrop-toggle",value:!!C.value.dialogBackdrop,label:e(o).dialogBackdrop,"onUpdate:value":a[3]||(a[3]=t=>k("dialogBackdrop",t))},null,8,["value","label"])]),s("div",Ee,[s("select",{ref_key:"newComponentType",ref:M,size:"1"},[s("option",Me,n(e(o).board),1),s("option",Ne,n(e(o).record),1),s("option",De,n(e(o).book),1),s("option",Oe,n(e(o).chart),1),s("option",Ge,n(e(o).analytics),1),s("option",Fe,n(e(o).comments),1),s("option",ze,n(e(o).recordProperties),1),s("option",We,n(e(o).controlGroup)+"1",1),s("option",qe,n(e(o).controlGroup)+"2",1)],512),s("button",{class:"thin",onClick:J},n(e(o).insert),1)]),(i(!0),p(N,null,D(C.value.components,(t,r)=>(i(),p("div",{key:r,class:"component"},[s("div",He,[t.type==="Board"?(i(),p("span",Ye,n(e(o).board),1)):d("",!0),t.type==="Record"?(i(),p("span",Ve,n(e(o).record),1)):d("",!0),t.type==="Book"?(i(),p("span",je,n(e(o).book),1)):d("",!0),t.type==="Chart"?(i(),p("span",Xe,n(e(o).chart),1)):d("",!0),t.type==="Analytics"?(i(),p("span",$e,n(e(o).analytics),1)):d("",!0),t.type==="Comment"?(i(),p("span",Je,n(e(o).comments),1)):d("",!0),t.type==="RecordInfo"?(i(),p("span",Ke,n(e(o).recordProperties),1)):d("",!0),t.type==="ControlGroup1"?(i(),p("span",Qe,n(e(o).controlGroup)+"1",1)):d("",!0),t.type==="ControlGroup2"?(i(),p("span",Ze,n(e(o).controlGroup)+"2",1)):d("",!0)]),s("div",null,[s("span",xe,[s("span",et,n(e(o).left)+":",1),s("input",{class:"value",type:"number",value:t.left,onInput:l=>h(r,"left",e(L)(l))},null,40,tt)]),s("span",ot,[s("span",st,n(e(o).top)+":",1),s("input",{class:"value",type:"number",value:t.top,onInput:l=>h(r,"top",e(L)(l))},null,40,lt)]),s("span",at,[s("span",rt,n(e(o).width)+":",1),s("input",{class:"value",type:"number",value:t.width,onInput:l=>h(r,"width",e(L)(l))},null,40,ut)]),s("span",nt,[s("span",it,n(e(o).height)+":",1),s("input",{class:"value",type:"number",value:t.height,onInput:l=>h(r,"height",e(L)(l))},null,40,ct)])]),t.type==="Board"?(i(),p("div",pt,[s("span",dt,[_(f,{value:!!t.rightControlBox,label:e(o).rightControlBox,"onUpdate:value":l=>h(r,"rightControlBox",l)},null,8,["value","label","onUpdate:value"])]),s("span",ht,[_(f,{value:!!t.leftControlBox,label:e(o).leftControlBox,"onUpdate:value":l=>h(r,"leftControlBox",l)},null,8,["value","label","onUpdate:value"])]),s("span",null,[_(G,{value:t.layoutType||e(w).STANDARD,items:[{label:e(o).standard,value:e(w).STANDARD},{label:e(o).compact,value:e(w).COMPACT},{label:e(o).portrait,value:e(w).PORTRAIT}],"onUpdate:value":l=>h(r,"layoutType",l)},null,8,["value","items","onUpdate:value"])])])):d("",!0),t.type==="Record"?(i(),p("div",_t,[s("span",vt,[_(f,{value:!!t.showCommentColumn,label:e(o).comments,"onUpdate:value":l=>h(r,"showCommentColumn",l)},null,8,["value","label","onUpdate:value"])]),s("span",ft,[_(f,{value:!!t.showElapsedTimeColumn,label:e(o).elapsedTime,"onUpdate:value":l=>h(r,"showElapsedTimeColumn",l)},null,8,["value","label","onUpdate:value"])]),s("span",mt,[_(f,{value:!!t.topControlBox,label:e(o).topControlBox,"onUpdate:value":l=>h(r,"topControlBox",l)},null,8,["value","label","onUpdate:value"])]),s("span",yt,[_(f,{value:!!t.branches,label:e(o).branches,"onUpdate:value":l=>h(r,"branches",l)},null,8,["value","label","onUpdate:value"])])])):d("",!0),t.type==="Chart"?(i(),p("div",Ct,[s("span",Pt,[_(G,{value:t.chartType,items:[{label:e(o).rawScore,value:e(R).RAW},{label:e(o).estimatedWinRate,value:e(R).WIN_RATE}],"onUpdate:value":l=>h(r,"chartType",l)},null,8,["value","items","onUpdate:value"])]),s("span",bt,[_(f,{value:!!t.showLegend,label:e(o).legends,"onUpdate:value":l=>h(r,"showLegend",l)},null,8,["value","label","onUpdate:value"])])])):d("",!0),t.type==="Analytics"?(i(),p("div",gt,[s("span",kt,[_(f,{value:!!t.historyMode,label:e(o).historyMode,"onUpdate:value":l=>h(r,"historyMode",l)},null,8,["value","label","onUpdate:value"])]),s("span",Ut,[_(f,{value:!!t.showHeader,label:e(o).headers,"onUpdate:value":l=>h(r,"showHeader",l)},null,8,["value","label","onUpdate:value"])]),s("span",wt,[_(f,{value:!!t.showTimeColumn,label:e(o).elapsedTime,"onUpdate:value":l=>h(r,"showTimeColumn",l)},null,8,["value","label","onUpdate:value"])]),s("span",Lt,[_(f,{value:!!t.showMultiPvColumn,label:e(o).rank,"onUpdate:value":l=>h(r,"showMultiPvColumn",l)},null,8,["value","label","onUpdate:value"])]),s("span",It,[_(f,{value:!!t.showDepthColumn,label:e(o).depth,"onUpdate:value":l=>h(r,"showDepthColumn",l)},null,8,["value","label","onUpdate:value"])]),s("span",Rt,[_(f,{value:!!t.showNodesColumn,label:e(o).nodes,"onUpdate:value":l=>h(r,"showNodesColumn",l)},null,8,["value","label","onUpdate:value"])]),s("span",Tt,[_(f,{value:!!t.showScoreColumn,label:e(o).score,"onUpdate:value":l=>h(r,"showScoreColumn",l)},null,8,["value","label","onUpdate:value"])]),s("span",Bt,[_(f,{value:!!t.showPlayButton,label:e(o).playButton,"onUpdate:value":l=>h(r,"showPlayButton",l)},null,8,["value","label","onUpdate:value"])]),s("span",St,[_(f,{value:!!t.showSuggestionsCount,label:e(o).suggestionsCount,"onUpdate:value":l=>h(r,"showSuggestionsCount",l)},null,8,["value","label","onUpdate:value"])])])):d("",!0),t.type==="Comment"?(i(),p("div",At,[s("span",Et,[_(f,{value:!!t.showBookmark,label:e(o).bookmark,"onUpdate:value":l=>h(r,"showBookmark",l)},null,8,["value","label","onUpdate:value"])])])):d("",!0),s("div",null,[r!==0?(i(),p("button",{key:0,class:"thin",onClick:()=>j(r)}," ↑ "+n(e(o).bringForward),9,Mt)):d("",!0),r!==C.value.components.length-1?(i(),p("button",{key:1,class:"thin",onClick:()=>X(r)}," ↓ "+n(e(o).sendBackward),9,Nt)):d("",!0),s("button",{class:"thin",onClick:()=>$(r)},n(e(o).remove),9,Dt)])]))),128))])):d("",!0)]),e(m).hasMessage?(i(),I(Ce,{key:0})):d("",!0),e(b).hasError?(i(),I(fe,{key:1})):d("",!0),e(E).message?(i(),I(me,{key:2})):d("",!0)],2))}}),Gt=he(Ot,[["__scopeId","data-v-3c3d39e1"]]);P.log(S.INFO,"start renderer process (layout manager)");const Ft=F(),zt=A();Promise.allSettled([Ft.setup(),zt.loadAppSettings().catch(y=>{P.log(S.ERROR,"アプリ設定の読み込み中にエラーが発生しました: "+y)})]).finally(()=>{const y=A().language;_e(y),P.log(S.INFO,"mount app (layout manager)"),ve(Gt).mount("#app")});
